<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Quiz</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />
  <style>
    /* Global Styles */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f0f4f8;
      color: #333;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 100vh;
    }
    h1 {
      text-align: center;
      margin-bottom: 10px;
      color: #1a73e8;
    }

    /* Container */
    #container {
      width: 90%;
      max-width: 600px;
      margin: 40px 0;
    }
    #cheatsheet,
    #quiz-container,
    #graph-container {
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
      padding: 20px;
      margin-bottom: 20px;
    }
    #cheatsheet h2 {
      margin-top: 0;
      color: #1a73e8;
    }
    #cheatsheet ul {
      list-style: inside disc;
      padding-left: 0;
    }

    /* Quiz Elements */
    #question {
      margin-bottom: 15px;
      font-weight: bold;
      font-size: 1.1em;
    }
    #answerBox,
    #graphInput {
      width: 100%;
      padding: 10px;
      font-size: 1em;
      box-sizing: border-box;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-bottom: 15px;
    }
    #button-group {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    button {
      flex: 1 1 auto;
      padding: 10px 0;
      font-size: 1em;
      background-color: #1a73e8;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.2s ease;
    }
    button:hover {
      background-color: #1558b0;
    }
    #feedback {
      margin-top: 15px;
      font-weight: bold;
      color: #d93025;
    }
    #feedback.correct {
      color: #188038;
    }
    #jxgboard {
      width: 100%;
      height: 400px;
    }
  </style>
</head>
<body>
  <div id="container">
    <h1>Study Quiz</h1>
    <audio id="meow" src="meow.mp3"></audio>

    <div id="cheatsheet">
      <h2>Answer Input Cheat Sheet</h2>
      <ul>
        <li>Fractions: use numerator/denominator, e.g.: 22/25</li>
        <li>Complex: a+bi format, no spaces, e.g.: -47/61+32/61i</li>
        <li>Lists: separate values with commas, e.g.: 1,-3/4</li>
        <li>Intervals: parentheses and unions, e.g.: (-2,7)</li>
        <li>Equations: use ^ for exponents, spaces optional</li>
        <li>Roots: use √ or sqrt(), e.g.: √61 or sqrt(61)</li>
      </ul>
    </div>

    <div id="quiz-container">
      <div id="question"></div>
      <input type="text" id="answerBox" placeholder="Type your answer here" />
      <div id="button-group">
        <button id="backBtn">← Back</button>
        <button id="skipBtn">Skip →</button>
        <button id="similarBtn">Similar Question</button>
        <button id="showAnsBtn">Show Answer</button>
        <button id="checkBtn">Check</button>
      </div>
      <div id="feedback"></div>
    </div>

    <div id="graph-container" style="display:none;">
      <input type="text" id="graphInput" placeholder="Enter f(x)=..." />
      <button id="plotBtn">Plot</button>
      <div id="jxgboard"></div>
      <div id="graphFeedback"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>
  <script>
    const questions = [
      { q: "#1 Even, odd, or neither? Determine whether the function below is even, odd, or neither:<br>f(x)=x−7/x", a: "neither" },
      { q: "#2 Graph shift (square root). Write an equation for the graph of y=√x shifted 5 units to the left, then 2 units up.", a: "sqrt(x+5)+2" },
      { q: "#3 Complex fraction. Simplify and write in a+bi form: (7+2i)/(−5−6i)", a: "-47/61+32/61i" },
      { q: "#4 Zeros of a quadratic. Find the exact zeros of f(x)=4x^2−x−3", a: "1,-3/4" },
      { q: "#5 Discriminant test. Using b^2−4ac, determine whether 3x^2=−4x+1 has one real, two real, or two imaginary solutions.", a: "two real solutions" },
      { q: "#6 Parabola features. For f(x)=x^2−4x−8, find the x-intercepts, y-intercept, axis of symmetry, vertex, and whether it’s a max or min.", a: "2±2√3,-8,2,(2,-12),min" },
      { q: "#7 Polynomial classification. Classify f(x)=2x^4−7x^2+x−3 as constant, linear, quadratic, cubic, or quartic; give leading term, coefficient, and degree.", a: "quartic;2x^4;2;4" },
      { q: "#8 Graph a cubic. Sketch f(x)=x^3−3x^2−x+3. Mark all intercepts.", a: "intercepts:-1,1,3;3", graph: true },
      { q: "#9 Synthetic division. Divide x^3+2x^2−x−8 by x−2. State the quotient and remainder.", a: "x^2+4x+7,6" },
      { q: "#10 Zeros of a cubic. Find the zeros of f(x)=x^3−4x^2+2x+4.", a: "2,1+√3,1-√3" },
      { q: "#11 Rational graph & asymptotes. Graph f(x)=(x−3)/(x+2), identify vertical and horizontal asymptotes and intercepts.", a: "x=-2,y=1,3,-3/2", graph: true },
      { q: "#12 Quadratic inequality. Solve x^2−5x−14<0.", a: "(-2,7)" },
      { q: "#13 Function composition. Given f(x)=3x^2+6x+9, g(x)=5x+2, find (g∘f)(x).", a: "15x^2+30x+47" }
    ];

    const similar = [
      [
        "Determine whether f(x)=2x−8/x is even, odd, or neither.",
        "Determine whether g(x)=x^3+5/x is even, odd, or neither.",
        "Determine whether h(x)=x^2−9/x^2 is even, odd, or neither."
      ],
      [
        "Write y=√x shifted 3 units left and 4 units up.",
        "Write y=√x shifted 2 units right and 6 units down.",
        "Write y=√x shifted 7 units left and 1 unit up."
      ],
      [
        "Simplify (3−2i)/(4+3i) into a+bi.",
        "Simplify (5+6i)/(−2+i) into a+bi.",
        "Simplify (−7+i)/(3−4i) into a+bi."
      ],
      [
        "Find zeros of f(x)=3x^2+5x−2.",
        "Find zeros of f(x)=2x^2−8x+6.",
        "Find zeros of f(x)=x^2+x−12."
      ],
      [
        "For x^2+4x+5=0 compute Δ and nature of roots.",
        "Rewrite 5x^2=−20x+15 compute Δ and roots.",
        "For 4x^2−x+2=0 compute Δ and state nature of roots."
      ],
      [
        "Parabola f(x)=x^2+2x−3 features?",
        "Parabola f(x)=2x^2−6x+4 features?",
        "Parabola f(x)=−x^2+4x+1 features?"
      ],
      [
        "Classify p(x)=x^5−2x+3.",
        "Classify q(x)=7x^3−x^2+x−9.",
        "Classify r(x)=4."
      ],
      [
        "Sketch f(x)=x^3−2x^2+x−2. Mark intercepts.",
        "Sketch f(x)=x^3+x^2−4x−4. Mark intercepts.",
        "Sketch f(x)=x^3−3x−1. Mark intercepts."
      ],
      [
        "Divide (x^3+3x^2−6x+2) by (x−1).",
        "Divide (x^3−5x+10) by (x+2).",
        "Divide (2x^3−x^2+4) by (x−2)."
      ],
      [
        "Zeros of x^3−6x^2+11x−6?",
        "Zeros of x^3+x^2−2x−2?",
        "Zeros of x^3−x^2−x+1?"
      ],
      [
        "Graph f(x)=(x−3)/(x+2)?",
        "Graph f(x)=(x+2)/(x−1)?",
        "Graph f(x)=(2x−5)/(x+3)?"
      ],
      [
        "Solve x^2−5x+4≤0.",
        "Solve x^2+x−6<0.",
        "Solve −x^2+2x+3<0."
      ],
      [
        "Find (g∘f)(x) for f(x)=2x^2+3x+1,g(x)=3x−2.",
        "Find (g∘f)(x) for f(x)=x^2−4x+5,g(x)=5x+6.",
        "Find (g∘f)(x) for f(x)=4x^2−x+7,g(x)=−2x+3."
      ]
    ];

    let current = 0;
    let board;
    const questionEl = document.getElementById('question');
    const answerBox = document.getElementById('answerBox');
    const graphContainer = document.getElementById('graph-container');
    const graphInput = document.getElementById('graphInput');
    const plotBtn = document.getElementById('plotBtn');
    const feedbackEl = document.getElementById('feedback');
    const graphFeedback = document.getElementById('graphFeedback');
    const meow = document.getElementById('meow');
    const similarBtn = document.getElementById('similarBtn');
    const showAnsBtn = document.getElementById('showAnsBtn');

    function loadQuestion() {
      const { q, graph } = questions[current];
      questionEl.innerHTML = q;
      feedbackEl.textContent = '';
      feedbackEl.classList.remove('correct');
      feedbackEl.style.color = '';
      answerBox.style.display = graph ? 'none' : 'block';
      graphContainer.style.display = graph ? 'block' : 'none';
      if (graph) {
        if (board) JXG.JSXGraph.freeBoard(board);
        board = JXG.JSXGraph.initBoard('jxgboard', { boundingbox: [-10, 10, 10, -10], axis: true });
        graphInput.value = '';
        graphFeedback.textContent = '';
      } else {
        answerBox.value = '';
      }
    }

    function endQuiz() {
      questionEl.textContent = 'Quiz Complete!';
      answerBox.style.display = 'none';
      document.getElementById('button-group').style.display = 'none';
      graphContainer.style.display = 'none';
    }

    document.getElementById('checkBtn').addEventListener('click', () => {
      if (!questions[current].graph) {
        const user = answerBox.value.replace(/\s+/g, '').toLowerCase();
        const correct = questions[current].a.replace(/\s+/g, '').toLowerCase();
        if (user === correct) {
          meow.play();
          feedbackEl.textContent = 'Good job!';
          feedbackEl.classList.add('correct');
          setTimeout(() => { current < questions.length - 1 ? (current++, loadQuestion()) : endQuiz(); }, 500);
        } else feedbackEl.textContent = 'Try again.';
      }
    });

    similarBtn.addEventListener('click', () => {
      const sims = similar[current] || [];
      if (sims.length) {
        const pick = sims[Math.floor(Math.random() * sims.length)];
        questionEl.innerHTML = pick;
        feedbackEl.textContent = '';
      }
    });

    showAnsBtn.addEventListener('click', () => {
      feedbackEl.textContent = 'Answer: ' + questions[current].a;
      feedbackEl.classList.remove('correct');
      feedbackEl.style.color = '#555';
    });

    plotBtn.addEventListener('click', () => {
      const expr = graphInput.value;
      try {
        const f = board.create('functiongraph', [
          function(x) { return eval(expr.replace(/\^/g, '**')); }
        ]);
        f.elmnt.addEventListener('click', () => {
          graphFeedback.textContent = 'Curve clicked!';
          meow.play();
        });
      } catch (e) {
        graphFeedback.textContent = 'Invalid function.';
      }
    });

    document.getElementById('backBtn').addEventListener('click', () => {
      if (current > 0) { current--; loadQuestion(); }
    });

    document.getElementById('skipBtn').addEventListener('click', () => {
      current < questions.length - 1 ? (current++, loadQuestion()) : endQuiz();
    });

    loadQuestion();
  </script>
</body>
</html>
